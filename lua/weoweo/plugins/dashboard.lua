return {
  "nvimdev/dashboard-nvim",
  lazy = false, -- As https://github.com/nvimdev/dashboard-nvim/pull/450, dashboard-nvim shouldn't be lazy-loaded to properly handle stdin.
  opts = function()
    -- LOGO 1
    -- local logo = 
    -- [[
    --       _____                   _____                  _______              _____                   _____                   _____          
    --      /\    \                 /\    \                /::\    \            /\    \                 /\    \                 /\    \         
    --     /::\____\               /::\    \              /::::\    \          /::\____\               /::\    \               /::\____\        
    --    /:::/    /              /::::\    \            /::::::\    \        /:::/    /               \:::\    \             /::::|   |        
    --   /:::/   _/___           /::::::\    \          /::::::::\    \      /:::/    /                 \:::\    \           /:::::|   |        
    --  /:::/   /\    \         /:::/\:::\    \        /:::/~~\:::\    \    /:::/    /                   \:::\    \         /::::::|   |        
    -- /:::/   /::\____\       /:::/__\:::\    \      /:::/    \:::\    \  /:::/____/                     \:::\    \       /:::/|::|   |        
   -- /:::/   /:::/    /      /::::\   \:::\    \    /:::/    / \:::\    \ |::|    |                      /::::\    \     /:::/ |::|   |        
  -- /:::/   /:::/   _/___   /::::::\   \:::\    \  /:::/____/   \:::\____\|::|    |     _____   ____    /::::::\    \   /:::/  |::|___|______  
 -- /:::/___/:::/   /\    \ /:::/\:::\   \:::\    \|:::|    |     |:::|    |::|    |    /\    \ /\   \  /:::/\:::\    \ /:::/   |::::::::\    \ 
-- |:::|   /:::/   /::\____/:::/__\:::\   \:::\____|:::|____|     |:::|    |::|    |   /::\____/::\   \/:::/  \:::\____/:::/    |:::::::::\____\
-- |:::|__/:::/   /:::/    \:::\   \:::\   \::/    /\:::\    \   /:::/    /|::|    |  /:::/    \:::\  /:::/    \::/    \::/    / ~~~~~/:::/    /
 -- \:::\/:::/   /:::/    / \:::\   \:::\   \/____/  \:::\    \ /:::/    / |::|    | /:::/    / \:::\/:::/    / \/____/ \/____/      /:::/    / 
  -- \::::::/   /:::/    /   \:::\   \:::\    \       \:::\    /:::/    /  |::|____|/:::/    /   \::::::/    /                      /:::/    /  
   -- \::::/___/:::/    /     \:::\   \:::\____\       \:::\__/:::/    /   |:::::::::::/    /     \::::/____/                      /:::/    /   
    -- \:::\__/:::/    /       \:::\   \::/    /        \::::::::/    /    \::::::::::/____/       \:::\    \                     /:::/    /    
    --  \::::::::/    /         \:::\   \/____/          \::::::/    /      ~~~~~~~~~~              \:::\    \                   /:::/    /     
    --   \::::::/    /           \:::\    \               \::::/    /                                \:::\    \                 /:::/    /      
    --    \::::/    /             \:::\____\               \::/____/                                  \:::\____\               /:::/    /       
    --     \::/____/               \::/    /                ~~                                         \::/    /               \::/    /        
    --      ~~                      \/____/                                                             \/____/                 \/____/         
    -- ]]

    -- LOGO 2
    --
        -- local logo = [[
     -- ╭╮╭╮╭┳━━━┳━━━┳╮╱╱╭┳━━┳━╮╭━╮
     -- ┃┃┃┃┃┃╭━━┫╭━╮┃╰╮╭╯┣┫┣┫┃╰╯┃┃
     -- ┃┃┃┃┃┃╰━━┫┃╱┃┣╮┃┃╭╯┃┃┃╭╮╭╮┃
     -- ┃╰╯╰╯┃╭━━┫┃╱┃┃┃╰╯┃╱┃┃┃┃┃┃┃┃
     -- ╰╮╭╮╭┫╰━━┫╰━╯┃╰╮╭╯╭┫┣┫┃┃┃┃┃
     -- ╱╰╯╰╯╰━━━┻━━━╯╱╰╯╱╰━━┻╯╰╯╰╯
       -- ]] 
    --
    -- LOGO 3

      -- local logo = [[
      --                       ,----..                              ____   
      --      .---.   ,---,.  /   /   \               ,---,       ,'  , `. 
      --     /. ./| ,'  .' | /   .     :       ,---,`--.' |    ,-+-,.' _ | 
      -- .--'.  ' ,---.'   |.   /   ;.  \     /__./|   :  : ,-+-. ;   , || 
     -- /__./ \ : |   |   ..   ;   /  ` ;,---.;  ; :   |  ',--.'|'   |  ;| 
 -- .--'.  '   \' :   :  |-;   |  ; \ ; /___/ \  | |   :  |   |  ,', |  ': 
-- /___/ \ |    ' :   |  ;/|   :  | ; | \   ;  \ ' '   '  |   | /  | |  || 
-- ;   \  \;      |   :   ..   |  ' ' ' :\   \  \: |   |  '   | :  | :  |, 
 -- \   ;  `      |   |  |-'   ;  \; /  | ;   \  ' '   :  ;   . |  ; |--'  
  -- .   \    .\  '   :  ;/|\   \  ',  /   \   \   |   |  |   : |  | ,     
   -- \   \   ' \ |   |    \ ;   :    /     \   `  '   :  |   : '  |/      
    -- :   '  |--"|   :   .'  \   \ .'       :   \ ;   |.';   | |`-'       
     -- \   \ ;   |   | ,'     `---`          '---"'---'  |   ;/           
      -- '---"    `----'                                  '---'            


      -- ]]
    -- LOGO 4

    -- local logo = [[
    --  ...    .     ...            ..      .             ....                                  .....     .      ...     ..      ..     
  -- .~`"888x.!**h.-``888h.      x88f` `..x88. .>     .x~X88888Hx.                            .d88888Neu. 'L   x*8888x.:*8888: -"888:   
 -- dX   `8888   :X   48888>   :8888   xf`*8888%     H8X 888888888h.        ...     ..        F""""*8888888F  X   48888X `8888H  8888   
-- '888x  8888  X88.  '8888>  :8888f .888  `"`      8888:`*888888888:    :~""888h.:^"888:    *      `"*88*"  X8x.  8888X  8888X  !888>  
-- '88888 8888X:8888:   )?""` 88888' X8888. >"8x    88888:        `%8   8X   `8888X  8888>    -....    ue=:. X8888 X8888  88888   "*8%- 
 -- `8888>8888 '88888>.88h.   88888  ?88888< 888> . `88888          ?> X888n. 8888X  ?888>           :88N  ` '*888!X8888> X8888  xH8>   
   -- `8" 888f  `8888>X88888. 88888   "88888 "8%  `. ?888%           X '88888 8888X   ?**h.          9888L     `?8 `8888  X888X X888>   
  -- -~` '8%"     88" `88888X 88888 '  `8888>       ~*??.            >   `*88 8888~ x88x.     uzu.   `8888L    -^  '888"  X888  8888>   
  -- .H888n.      XHn.  `*88! `8888> %  X88!       .x88888h.        <   ..<"  88*`  88888X  ,""888i   ?8888     dx '88~x. !88~  8888>   
 -- :88888888x..x88888X.  `!   `888X  `~""`   :   :"""8888888x..  .x       ..XC.    `*8888k 4  9888L   %888>  .8888Xf.888x:!    X888X.: 
 -- f  ^%888888% `*88888nx"      "88k.      .~    `    `*888888888"      :888888H.    `%88> '  '8888   '88%  :""888":~"888"     `888*"  
    --   `"**"`    `"**""          `""*==~~`              ""***""       <  `"888888:    X"       "*8Nu.z*"       "~'    "~        ""    
    --                                                                        %888888x.-`                                               
    --                                                                          ""**""                                                  
-- ]]

    -- local logo = [[
    -- _    _      ____      ____    _  _   __     __  __   
   -- F L  J J    F ___J    F __ ]  FJ  L]  FJ    F  \/  ]  
  -- J J .. L L  J |___:   J |--| LJ |  | LJ  L  J |\__/| L 
  -- | |/  \| |  | _____|  | |  | |J J  F L|  |  | |`--'| | 
  -- F   /\   J  F L____:  F L__J JJ\ \/ /FF  J  F L    J J 
 -- J___//\\___LJ________LJ\______/F\\__//J____LJ__L    J__L
 -- |___/  \___||________| J______F  \__/ |____||__L    J__|
                                                         
-- ]]

    local logo = [[
   dMP dMP dMP dMMMMMP .aMMMb  dMP dMP dMP dMMMMMMMMb 
  dMP dMP dMP dMP     dMP"dMP dMP dMP amr dMP"dMP"dMP 
 dMP dMP dMP dMMMP   dMP dMP dMP dMP dMP dMP dMP dMP  
dMP.dMP.dMP dMP     dMP.aMP  YMvAP" dMP dMP dMP dMP   
VMMMPVMMP" dMMMMMP  VMMMP"    VP"  dMP dMP dMP dMP    
                                                      

    ]]

    -- local logo = [[
-- Y8b Y8b Y888P 888'Y88   e88 88e   Y8b Y88888P 888     e   e     
 -- Y8b Y8b Y8P  888 ,'Y  d888 888b   Y8b Y888P  888    d8b d8b    
  -- Y8b Y8b Y   888C8   C8888 8888D   Y8b Y8P   888   e Y8b Y8b   
   -- Y8b Y8b    888 ",d  Y888 888P     Y8b Y    888  d8b Y8b Y8b  
    -- Y8P Y     888,d88   "88 88"       Y8P     888 d888b Y8b Y8b 
                                                                


    -- ]]

    -- local logo = [[
    --                                     `8P               
                                                          
 -- ?88   d8P  d8P d8888b d8888b ?88   d8P  88b  88bd8b,d88b 
 -- d88  d8P' d8P'd8b_,dPd8P' ?88d88  d8P'  88P  88P'`?8P'?8b
 -- ?8b ,88b ,88' 88b    88b  d88?8b ,88'  d88  d88  d88  88P
 -- `?888P'888P'  `?888P'`?8888P'`?888P'  d88' d88' d88'  88b


    -- ]]
    --
    --
    --
    -- local logo = [[
    -- =================     ===============     ===============   ========  ========
-- \\ . . . . . . .\\   //. . . . . . .\\   //. . . . . . .\\  \\. . .\\// . . //
-- ||. . ._____. . .|| ||. . ._____. . .|| ||. . ._____. . .|| || . . .\/ . . .||
-- || . .||   ||. . || || . .||   ||. . || || . .||   ||. . || ||. . . . . . . ||
-- ||. . ||   || . .|| ||. . ||   || . .|| ||. . ||   || . .|| || . | . . . . .||
-- || . .||   ||. _-|| ||-_ .||   ||. . || || . .||   ||. _-|| ||-_.|\ . . . . ||
-- ||. . ||   ||-'  || ||  `-||   || . .|| ||. . ||   ||-'  || ||  `|\_ . .|. .||
-- || . _||   ||    || ||    ||   ||_ . || || . _||   ||    || ||   |\ `-_/| . ||
-- ||_-' ||  .|/    || ||    \|.  || `-_|| ||_-' ||  .|/    || ||   | \  / |-_.||
-- ||    ||_-'      || ||      `-_||    || ||    ||_-'      || ||   | \  / |  `||
-- ||    `'         || ||         `'    || ||    `'         || ||   | \  / |   ||
-- ||            .===' `===.         .==='.`===.         .===' /==. |  \/  |   ||
-- ||         .=='   \_|-_ `===. .==='   _|_   `===. .===' _-|/   `==  \/  |   ||
-- ||      .=='    _-'    `-_  `='    _-'   `-_    `='  _-'   `-_  /|  \/  |   ||
-- ||   .=='    _-'          '-__\._-'         '-_./__-'         `' |. /|  |   ||
-- ||.=='    _-'                                                     `' |  /==.||
-- =='    _-'                        W E O V I M                         \/   `==
-- \   _-'                       D E F I N I T I V E                      `-_   /
 -- `''                             E D I T I O N                            ``'
    -- ]]

    logo = string.rep("\n", 8) .. logo .. "\n\n"

    local opts = {
      theme = "doom",
      hide = {
        -- this is taken care of by lualine
        -- enabling this messes up the actual laststatus setting after loading a file
        statusline = false,
      },
      config = {
        header = vim.split(logo, "\n"),
        -- stylua: ignore
        center = {
          { action = "Telescope oldfiles",                                       desc = " Recent Files",    icon = " ", key = "r" },
          { action = "Telescope live_grep",                                      desc = " Find Text",       icon = " ", key = "g" },
          { action = "Lazy",                                                     desc = " Lazy",            icon = "󰒲 ", key = "l" },
          { action = "qa",                                                       desc = " Quit",            icon = " ", key = "q" },
          { action = "Oil",                                                       desc = " OIL",           icon = " ",  key = "f" },
        },
        footer = function()
          local stats = require("lazy").stats()
          local ms = (math.floor(stats.startuptime * 100 + 0.5) / 100)
          return { "⚡ Neovim loaded " .. stats.loaded .. "/" .. stats.count .. " plugins in " .. ms .. "ms" }
        end,
      },
    }

    for _, button in ipairs(opts.config.center) do
      button.desc = button.desc .. string.rep(" ", 43 - #button.desc)
      button.key_format = "  %s"
    end

    -- close Lazy and re-open when the dashboard is ready
    if vim.o.filetype == "lazy" then
      vim.cmd.close()
      vim.api.nvim_create_autocmd("User", {
        pattern = "DashboardLoaded",
        callback = function()
          require("lazy").show()
        end,
      })
    end

    return opts
  end,
}
